{% load static %}

<form id="chat-form"
    @submit.prevent="send"
    x-data="chatFormState({
        isLocked: {{ simulation_locked|yesno:'true,false' }},
        isFeedbackContinuation: {{ feedback_continuation|yesno:'true,false' }},
    })"
>
  <button
          type="button"
          id="emoji-button"
          title="Emoji"
          class="emoji-button hide-small"
          :aria-label="emojiAriaLabel()"
          :aria-pressed="showEmojiPicker"
          @click.prevent="toggleEmojiPicker"
  >
        <span class="iconify chat-icon" data-icon="fa6-regular:face-smile" data-inline="false"></span>
  </button>
  <label for="chat-message-input" class="sr-only">Message</label>
  <textarea
    x-model="messageText"
    id="chat-message-input"
    x-ref="messageInput"
    @input="handleInput"
    @keydown.enter.exact.prevent="send"
    :disabled="isLocked"
    :placeholder="placeholderText()"
    :aria-label="messageAriaLabel()"
    rows="1"
    style="resize: none"
    autofocus
  ></textarea>
    <button
            class="hide-small"
            type="submit"
            :disabled="isLocked"
            :aria-label="sendAriaLabel()"
            @click.prevent="send"
    >
      <span
          class="iconify chat-icon mr-4"
          :class="{ 'color-accent-blue': !isLocked }"
          data-icon="bi:arrow-up-circle-fill"
          data-inline="false"
      ></span>
    </button>
    <button
            class="show-small"
            type="submit"
            :disabled="isLocked"
            :aria-label="sendAriaLabel()"
            @click.prevent="sendFromMobile"
    >
      <span
          class="iconify chat-icon"
          :class="{ 'color-accent-blue': !isLocked }"
          data-icon="bi:arrow-up-circle-fill"
          data-inline="false"
      ></span>
    </button>
</form>
