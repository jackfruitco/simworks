{% load static %}

<header id="header">
    <!-- Header Navigation Bar  -->
    <div id="navBar" class="top bar flex">
        <a href="{% url 'home' %}" class="bar-item button">
            <span class="iconify fit" data-icon="line-md:home-twotone" data-inline="true"></span> Home</a>
        <a href="{% url 'chatlab:index' %}" class="bar-item button hide-small">
            <span class="iconify fit" data-icon="line-md:cellphone-twotone" data-inline="true"></span> ChatLab</a>
        <!-- Header User Welcome / User Registration -->
        {% if user.is_authenticated %}
        <div id="user-info" class="bar-item end user-info hide-small">
            <span>Welcome, {{ user.first_name|default:user.username }}!</span>
        </div>
        {% else %}
        <a href="{% url 'accounts:login' %}" class="bar-item end button acct hide-small">
            <span class="iconify fit" data-icon="mdi:login-variant" data-inline="true"></span> Login</a>
        <a href="{% url 'accounts:register' %}" class="bar-item button acct hide-small">
            <span class="iconify fit" data-icon="mdi:register-outline" data-inline="true"></span> Register!</a>
        {% endif %}

        <!-- User Menu Toggle -->
        <div x-data>
            <div x-menu>
                <button x-menu:button>
                    Menu
                </button>

                <!-- User Menu Items -->
                <div x-menu:items>
                    <a x-menu:item href="{% url 'accounts:profile' %}">
                        My Profile
                    </a>
                    <a x-menu:item href="{% url 'accounts:new-invite' %}">
                        Invite a friend
                    </a>
                    <a x-menu:item href="{% url 'accounts:logout' %}">
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </div>

{% comment %}
    <!-- User Menu -->
    <div id="user-menu" class="bar-item top right" @click.outside="closeMenu">
        <!-- User Menu Dropdown -->
        <div id="user-menu-dropdown" x-ref="userMenuDropdown" tabindex="-1" x-cloak x-show.important="openMenu" @keydown.escape.stop.prevent="closeMenu" @keydown.tab="trapFocus($event)">
            <!-- Small Screen Navigation -->
            <div id="small-screen-nav" class="hide-medium hide-large">
                <a href="{% url 'chatlab:index' %}" class="sidebar-item button" @click="closeMenu"> ChatLab</a>
            </div>
            <!-- User Account Navigation -->
            <div id="user-account-nav">
                {% if user.is_authenticated %}
                    <a href="{% url 'accounts:profile' %}" class="sidebar-item button my-4" @click="closeMenu">Profile</a>
                    <!--<a href="{% url 'accounts:logout' %}" class="sidebar-item button" @click="openMenu = false">Logout</a>-->
                    <form action="{% url 'accounts:logout' %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        {% include 'partials/_button.html' with
                            label='Logout'
                            variant='danger'
                            type='submit'
                            extra_classes='sidebar-item button my-4'
                            attrs='@click="open-menu = false"'
                        %}
                    </form>
                {% else %}
                    <a href="{% url 'accounts:login' %}" class="sidebar-item button acct hide-large hide-medium" @click="closeMenu">Login</a>
                    <a href="{% url 'accounts:register' %}" class="sidebar-item button acct hide-large hide-medium" @click="closeMenu">Registration</a>
                {% endif %}
                <div class="sidebar-item" x-data="themeToggle()" x-init="init()">
                    <button @click="toggle()" class="theme-toggle" title="Toggle theme">
                        <span x-show="!dark" class="iconify transition-transform duration-300 rotate-0" data-icon="line-md:moon-filled-alt-to-sunny-filled-loop-transition" data-inline="false"></span>
                        <span x-show="dark" class="iconify transition-transform duration-300 rotate-180" data-icon="line-md:sunny-filled-loop-to-moon-alt-filled-transition" data-inline="false"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    {% endcomment %}
</header>
